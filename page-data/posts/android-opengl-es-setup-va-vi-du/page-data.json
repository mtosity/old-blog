{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/android-opengl-es-setup-va-vi-du","result":{"data":{"markdownRemark":{"id":"b8889b9c-331e-5873-9155-0e5e9a08237f","html":"<blockquote>\n<p>Bài viết lấy resources từ <a href=\"https://developer.android.com/guide/topics/graphics/opengl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://developer.android.com/guide/topics/graphics/opengl</a></p>\n</blockquote>\n<h1 id=\"andorid-studio\" style=\"position:relative;\"><a href=\"#andorid-studio\" aria-label=\"andorid studio permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Andorid Studio</h1>\n<p>Tải về <a href=\"https://developer.android.com/studio\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ở đây</a>, và cài đặt như phần mềm bình thường</p>\n<h3 id=\"cài-sdk\" style=\"position:relative;\"><a href=\"#c%C3%A0i-sdk\" aria-label=\"cài sdk permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cài SDK</h3>\n<p>Trong màn hình <strong>Welcome to Android Studio</strong> chọn <strong>configure</strong> góc dưới phải -> <strong>SDK Manager</strong></p>\n<p>Ở mục Android SDK chọn <code class=\"language-text\">Android 7.1.1</code> với <code class=\"language-text\">API 25</code>, vừa đủ mới và đủ cũ để làm trong năm 2020 :></p>\n<blockquote>\n<p>OpenGL ES 1.0 and 1.1 - This API specification is supported by Android 1.0 and higher.</p>\n<p>OpenGL ES 2.0 - This API specification is supported by Android 2.2 (API level 8) and higher.</p>\n<p>OpenGL ES 3.0 - This API specification is supported by Android 4.3 (API level 18) and higher.</p>\n<p>OpenGL ES 3.1 - This API specification is supported by Android 5.0 (API level 21) and higher.</p>\n</blockquote>\n<p>Chuyển sang tab <strong>SDK Tools</strong> bên trên phải chọn <strong>NDK</strong>, <strong>CMake</strong> (những thứ này để build OpenGL ES)</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0c60a4ae888545f11ad4ab0da02f4852/8cae4/android-sdk-tools-opengl.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADBElEQVQ4y3VTy47TMBSNxAIWvGH6mikCyojOFphn49iOkyZx82rSh5gwC1iwgQ1IbBB/iMSair+ACmbR+HLtziDEI9KRnSv75Jxzb6yTzf7FsfQmdsifEcKOCWUV5aJyPb/iwqtGSVaNy2lVTmaVjBNTcxiviMMqfZY49BjxDDF7sL19ybp35/5dMZSr4SgDP0pAhAn4YQxJNoY4ywEJIc0LSMfFeo+r6wdAmAsOF0C4B47rw8Dh0N7c2rau3Wz0fFl8mx2/gGxSrUQ4rqkI62Eoay+IahGM6mE0qgOpV1n7WKOuVw8cWtvUrYmIVsSTYLvR92an27duNzo9R8TLfHoCYTKrbR4r5kk1LicqyUuVTp6qUVYoVKlQoQpkbBCOEoVK1RGhmhyOiPOj2Wr3rVZ7s2dTbxmnJYQyU4T5QLlv7GpEIx2BNDY1xDAEVA+oGBHrd6VrqPrUEG5s7fQO5KtlfPIB/Nk7dZi8hUNviqQc8nKKmZWGlHtDA5tyzIuhIrrONc3UWf200Wz2rVvt7d5AvlyWz99DNH+jBvFrOBIlMNeFvJjghRzQnlHGPd8QohrTFNM0JNTNwY8gYatv3bi10XO9cJkXM7w0Ug5atp31JRwXKKYzyIrSkGrLWh02y6g9i+WXwo0GKrxy/XYvTKbLMJnDgEtF/QxHITAjMZ5MDVleTszI6Jq2em5dEyb5WJ1FcNpsY4ZXkVCm02VWVjiHhZLpHJgX4WUX1c2hnM1BIplWpZugVWpCbTnB+dQKz3JdN0WPjQiypQhzIC5aFjF+fZ3V750VwwA8XBlGcd4YJnwdjSE0CluYYXvzzv0jGn4lbqwJV0Qktc38Ws/Xoe38BSSqUV1NKDd7xIowjrmz76125yESdh8QHtVukAHzE0SKltahnys8h65p6yFaj+LUAP8ikGkBHv627U5nx8LOdHf3Dz8+2t3/8ujJ3mfEAveLJ3sH/8H+Qp+xHbpwmLvY2z/4vEvll8c8+3Tj2uV7Fj4XEA1EF7H1B7r/2P/vXFNz/QSJG8fEJWzegQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/0c60a4ae888545f11ad4ab0da02f4852/8ac56/android-sdk-tools-opengl.webp 240w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/d3be9/android-sdk-tools-opengl.webp 480w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/e46b2/android-sdk-tools-opengl.webp 960w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/71a33/android-sdk-tools-opengl.webp 1109w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/0c60a4ae888545f11ad4ab0da02f4852/8ff5a/android-sdk-tools-opengl.png 240w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/e85cb/android-sdk-tools-opengl.png 480w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/d9199/android-sdk-tools-opengl.png 960w,\n/static/0c60a4ae888545f11ad4ab0da02f4852/8cae4/android-sdk-tools-opengl.png 1109w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/0c60a4ae888545f11ad4ab0da02f4852/d9199/android-sdk-tools-opengl.png\"\n          alt=\"android sdk tools opengl\"\n          title=\"android sdk tools opengl\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Apply -> Cài -> OK</p>\n<h3 id=\"android-emulator\" style=\"position:relative;\"><a href=\"#android-emulator\" aria-label=\"android emulator permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Android Emulator</h3>\n<p>Ở màn hình <strong>Welcome</strong>, <strong>configure</strong> -> <strong>AVD Manager</strong> -> <strong>Create Virtual Device</strong> -> Chọn đồ chơi tuỳ ý :> -> trỏ tới <strong>Android 7.1</strong>, Download nếu chưa có.</p>\n<h1 id=\"ví-dụ-tam-giác-opengl-es\" style=\"position:relative;\"><a href=\"#v%C3%AD-d%E1%BB%A5-tam-gi%C3%A1c-opengl-es\" aria-label=\"ví dụ tam giác opengl es permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ví dụ tam giác OpenGL ES</h1>\n<p>Chỉ vẽ tam giác trong OpenGl ES :></p>\n<h3 id=\"tạo-project\" style=\"position:relative;\"><a href=\"#t%E1%BA%A1o-project\" aria-label=\"tạo project permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tạo Project</h3>\n<p>Ở màn hình <strong>Welcome</strong> chọn <strong>Start new Android Studio Project</strong> -> chọn <strong>Empty Activity</strong> -> Chọn location, name,… rồi <strong>finish</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/41fcaf49251c2e24796fe6bc05e145dd/ad997/android-create-project.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACwUlEQVQ4y6WUTWvUQBjH9yB40O9RsC8LbXc3m2QyySSZTJLJrruLrXTbLi69KUoPXkQ8+BV8ARH15EX02O6lIH4B304qyIInz0UKZbd5fGayta1WLw78eCaTyX+e5z8PKbUtxyJ2PakZVlQ16qJWt4SBVA1TGKYluEhEnEjBglDYhArbcRF6nIg4rjQtMlVSI17OhsnGEshEQqPZhCxrFDSKmEqp50mSQhQJiMRJOI9Aygwchz7Wgo3rveHKnRvQXb487vf7+epqN+92u3lvfR3nq3maJrmUKSLz7BRwfdRqtcDzvGdakBJ3GAYRUI+NXebnrh9o8Dn3MGKpRfSL+DvMD0ZcxFA3radasGpaQ9tlYDnugWFYYFTrYNRMqNsOhCIBkWbghREQj4HDghNQFuTEZSPHC2C+UisEDYsMHc/XgnTzGth3b4F9+yZYcQwBCjXbHRSVEKB/LOTg+iF4iI6YPX47ojhfrBpHgsT1wabewZt3b2EXAL792IWV3hVQ683OJRCyAVGSAeMxUB9F0aIJOWY6wkxh4TTBj+8/gBr7e3uwjoJOEMPF5TXgWRu4bOsYZR2IGgU86+ROGJ8myLTgp89f4HD0+huAPQfYh8oOINRTeya4OuJ32kPKQhQ85iGZeHjvwUPY2h7Ai5evtHcEy0uwXB4nEGNMsC9j7DkVlY/oX+HhCUHT/nUpJqHqVJ2RibfscGzmxhKEsoM3nupseZyCz4W6EJVljuhL+UNQlVz0YKhRm4nr5SyMci/gGoaod3jgMbyRi5UceWjaXydZjZDxv8AKxtifOir0OqH7DqWwUKk+OfTwO56u/FCN+lfU+3BSsiJEsCKg2Am8tQaLpvNcC16YmX00PVvemZ6d20YGfwP3DdCnQaVmDPCvNFjEOFcuD2bma1tlIl9PzVWulibjLHL+PzmHnNm8v1P6CaOi+FC6FjSHAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/41fcaf49251c2e24796fe6bc05e145dd/8ac56/android-create-project.webp 240w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/d3be9/android-create-project.webp 480w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/e46b2/android-create-project.webp 960w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/2dbb9/android-create-project.webp 1012w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/41fcaf49251c2e24796fe6bc05e145dd/8ff5a/android-create-project.png 240w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/e85cb/android-create-project.png 480w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/d9199/android-create-project.png 960w,\n/static/41fcaf49251c2e24796fe6bc05e145dd/ad997/android-create-project.png 1012w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/41fcaf49251c2e24796fe6bc05e145dd/d9199/android-create-project.png\"\n          alt=\"android create project\"\n          title=\"android create project\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h3 id=\"một-số-khái-niệm\" style=\"position:relative;\"><a href=\"#m%E1%BB%99t-s%E1%BB%91-kh%C3%A1i-ni%E1%BB%87m\" aria-label=\"một số khái niệm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Một số khái niệm</h3>\n<p>Code Android thì dùng Java mà Java thì theo lý trí Opp chỉ có class.</p>\n<p>Activity: có thể một class Activity trong file <code class=\"language-text\">MainActivity.java</code>, một activity = một màn hình</p>\n<p><a href=\"https://developer.android.com/guide/topics/manifest/manifest-intro\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">App manifest</a> là nơi chứa thông tin app để show cho <strong>Android build tools</strong>, <strong>Android OS</strong> và <strong>Google Play</strong></p>\n<h3 id=\"đưa-opengl-es-vào\" style=\"position:relative;\"><a href=\"#%C4%91%C6%B0a-opengl-es-v%C3%A0o\" aria-label=\"đưa opengl es vào permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Đưa OpenGL ES vào</h3>\n<p>Chỉ cần vào <code class=\"language-text\">AndroidManifest.xml</code> thêm vào (trong tag manifest, trên tag application):</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- Tell the system this app requires OpenGL ES 2.0. --></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>uses-feature</span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>glEsVersion</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>0x00020000<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\"><span class=\"token namespace\">android:</span>required</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>Xong build (cái búa) và chạy (nút play), được như vầy không lỗi là OK</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/320a05af045b0cce450d6c8ff1648c16/d777c/android-hello-opengl.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADMElEQVQ4yz2TS2wbVRSGBxUQatSWdNEUObHdoCbYHs+MPbZn/Jy3x/YkdoPjVICQSEKggBBCKhtWgFBZIAESEgi6BFQJwZ5l2SBIeWyTZRbAmqrNoyj5uB5LXOnXuTPSfPf8/z0jaf4LtNwuRrMdy7RC6k6PciNEr/miBuJ9iGF1KNXFs5Bec9FMh4JhUzBdyjWHxVKHU+kuUq1/Dae3hBVEmC2fUsOlXm/QCy0cp0XLbtJy6jRadSpGGV0voqkqBS1PqaihFwuiKrSCAQvuNaTo+et4UcRgdJVOf4DdDimUKjSrJULPxawbaLqCLMsoioKq5kml55GkR5EenuLUY+fEXmJl9Sqfff0DUvfZN4j6EcsrVwijHkFHWDNMFFkjcLy4u2JFRc7nyGZzLF6+RMVeY/mtX/Beu431yo/UXrzNm+9/z6c3v0GyR6/juy5R1Mdvd7HdAL1siI+zNE2VWqWMJmwpmkyxpDE/n2Zjc4tj4O69Y+7eh3/uwU8//8Y7790QGS5vEfgBV55exfVDkZVDqWJSFjarZYVcLksmk40PGNtOJpNsbm4yXkeH+zx4cMi/QnfubHPj45tImvccYeAzGKzEsAnQQFVyApSJlc1Oagycm2N9fSMGHhwccHh0FGt7e5sPv/gWSW4OsW2HpuVSa1jUm7awViGbk2PAuLNMdtJhPp8XHaYEcD0G7u/vxzoSwD9+/5VPvryFlDGX8HwfR9h1vHac4Rhuuz7Nlo1Za2BWGxjVerzPySpbL738P/C+ECfHfHXrO/zRq0iX9TZht8NQjM04xyDsidnzJsBmk06nGx+oFcTFKCrp9CU2NiaWx+vk5CSuH3z0OQ/NlJDm8y28oM3KcI3R2jMxsNawRZY2lmXR74vbF0BVDPM4glQqxWg0Ym9vj93dXXZ2dvj7rz+5/va7PDJTEMCsgRN4DIZDVtfEcEdLsXXLHv8xNZGvRUF0l8k8FV9MLpdjdjbB1NRpzp+fZnr6cc6dPcOZ6YucTZWRkgsafs/Hj0KhNk4YCMvCruWhVVpiyMUvZ1ZRNR1FLaAWdBYWM1yYuUhido7EXJJEIsGFxJOcfkLmP2cMApB55xJPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/320a05af045b0cce450d6c8ff1648c16/8ac56/android-hello-opengl.webp 240w,\n/static/320a05af045b0cce450d6c8ff1648c16/d3be9/android-hello-opengl.webp 480w,\n/static/320a05af045b0cce450d6c8ff1648c16/e46b2/android-hello-opengl.webp 960w,\n/static/320a05af045b0cce450d6c8ff1648c16/f992d/android-hello-opengl.webp 1440w,\n/static/320a05af045b0cce450d6c8ff1648c16/c8370/android-hello-opengl.webp 1555w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/320a05af045b0cce450d6c8ff1648c16/8ff5a/android-hello-opengl.png 240w,\n/static/320a05af045b0cce450d6c8ff1648c16/e85cb/android-hello-opengl.png 480w,\n/static/320a05af045b0cce450d6c8ff1648c16/d9199/android-hello-opengl.png 960w,\n/static/320a05af045b0cce450d6c8ff1648c16/07a9c/android-hello-opengl.png 1440w,\n/static/320a05af045b0cce450d6c8ff1648c16/d777c/android-hello-opengl.png 1555w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/320a05af045b0cce450d6c8ff1648c16/d9199/android-hello-opengl.png\"\n          alt=\"android hello opengl\"\n          title=\"android hello opengl\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h3 id=\"tạo-các-class-chính-trong-openql-es-view-renderer\" style=\"position:relative;\"><a href=\"#t%E1%BA%A1o-c%C3%A1c-class-ch%C3%ADnh-trong-openql-es-view-renderer\" aria-label=\"tạo các class chính trong openql es view renderer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Tạo các class chính trong OpenQL ES (View, Renderer)</h3>\n<ul>\n<li>Cách tạo class</li>\n</ul>\n<p>Như vầy nhé =))</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 960px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/962ac4172d8471a00d0565ab37a379b8/d777c/android-create-class.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.25%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACxUlEQVQ4y0WTy27TQBiFLXbsEEJA1QgQAuLEieM0iZ3E9+vYjq+5lFZCgi4AqXtWtKUIhMSKR+tr8BaHfyZFjfTLlp05/s6ZM5Kf7xBkDcywghM38NIGcd7CiUq4cQmPJsz48wpuVMBLSph+CsOJsXQSzF0GO0jRGde4L28g2awFq9bwooxeMJhuAsdxEUYhbC+AFXiwfA9z08LRVIeqTTHSjjAea2I0TYOhT/F6wvBIDiBZrEHYbJC2W7gswzLZwco+IGnPYKfvYcTvMAtP4BVnKE/OYeZnUI0YcvcN5F4P3W4Xw+EQB8+6kO49gMTqHap1g1VdIc5SpKsCaVbAdonQJULHhxfEKJs16vUGWVFhQbSyLKPf76OvDNB99Rzh5gs+/fkLae7lWKWZEPHDBDHLUROx5XhCzLQ9EoywKhr6GOVK9zNjjl5vL8jpDg87uL7+Dv6TZnaCsqxQVC0s1xei2Yo2iPLjhDY9c+iaFgWazRZBzDDVDRLs3Ql2Ori8+rYXnC4j1GUpCBemIwSLqoHrR1hariDkggkJZkUJx78lvLU8HAyE4NX1z/+CATw/FPa4YMhSlHWLnLKq2w1youUfYZQxywuYFMV8Ye4JFQVDVRWWLy5vCQ0rQhDFCONUZMWyFdr1Dikt5vdJmhNtiKhcIadoTIqA5zszFtCNJUHY6ClDfL242gvqVkB/LLE9PiWqWmwKz5OLLC1HWOYT5bmwzLvJLStEN6D8VHUEuT/Aj1+/94ITwxFV2b09RbPeCipuNYgYbUy0rw1Zni+WtFgVFnl23DIfRelTHxV8/HyOm5sbSEe6SdnkQnC9PQZL9zYdsmZS32a6jqPJhBYOqHtdUZf9DtPQVaZim5aNx08OIEkSJG06p/yYsBolGdnzRV30hYPRzKKcFnTkZkSm0bEbQx3dzYyOIn9n2i46L/t4+PQF/gGU5tKiShXPxQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/962ac4172d8471a00d0565ab37a379b8/8ac56/android-create-class.webp 240w,\n/static/962ac4172d8471a00d0565ab37a379b8/d3be9/android-create-class.webp 480w,\n/static/962ac4172d8471a00d0565ab37a379b8/e46b2/android-create-class.webp 960w,\n/static/962ac4172d8471a00d0565ab37a379b8/f992d/android-create-class.webp 1440w,\n/static/962ac4172d8471a00d0565ab37a379b8/c8370/android-create-class.webp 1555w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/962ac4172d8471a00d0565ab37a379b8/8ff5a/android-create-class.png 240w,\n/static/962ac4172d8471a00d0565ab37a379b8/e85cb/android-create-class.png 480w,\n/static/962ac4172d8471a00d0565ab37a379b8/d9199/android-create-class.png 960w,\n/static/962ac4172d8471a00d0565ab37a379b8/07a9c/android-create-class.png 1440w,\n/static/962ac4172d8471a00d0565ab37a379b8/d777c/android-create-class.png 1555w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/962ac4172d8471a00d0565ab37a379b8/d9199/android-create-class.png\"\n          alt=\"android create class\"\n          title=\"android create class\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<ul>\n<li>Class View</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Context</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>opengl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GLSurfaceView</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyGLSurfaceView</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">GLSurfaceView</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">MyGLRenderer</span> renderer<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">MyGLSurfaceView</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Context</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Create an OpenGL ES 2.0 context</span>\n        <span class=\"token function\">setEGLContextClientVersion</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        renderer <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">MyGLRenderer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Set the Renderer for drawing on the GLSurfaceView</span>\n        <span class=\"token function\">setRenderer</span><span class=\"token punctuation\">(</span>renderer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Class <strong>MyGLSurfaceView</strong> để hiện màn hình (view) OpenGL lên màn hình Android, class này được kế thừa từ class <strong>GLSurfaceView</strong> của <strong>OpenGLES</strong></p>\n<p><a href=\"https://developer.android.com/reference/android/opengl/GLSurfaceView#setEGLContextClientVersion(int)\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">setEGLContextClientVersion(2)</a> để tạo một <a href=\"https://www.khronos.org/opengl/wiki/OpenGL_Context\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">OpenGL context</a> thích hợp với OpenGL2.0, sau đó phải <code class=\"language-text\">setRenderer</code> từ một class kế thừa class <strong>GLSurfaceView.Renderer</strong></p>\n<ul>\n<li>Class Renderer</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>microedition<span class=\"token punctuation\">.</span>khronos<span class=\"token punctuation\">.</span>egl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EGLConfig</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">javax<span class=\"token punctuation\">.</span>microedition<span class=\"token punctuation\">.</span>khronos<span class=\"token punctuation\">.</span>opengles<span class=\"token punctuation\">.</span></span>GL10<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>opengl<span class=\"token punctuation\">.</span></span>GLES20<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token namespace\">android<span class=\"token punctuation\">.</span>opengl<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">GLSurfaceView</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyGLRenderer</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">GLSurfaceView</span><span class=\"token punctuation\">.</span><span class=\"token class-name\">Renderer</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSurfaceCreated</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GL10</span> unused<span class=\"token punctuation\">,</span> <span class=\"token class-name\">EGLConfig</span> config<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Set the background frame color</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glClearColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0f</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onDrawFrame</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GL10</span> unused<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// Redraw background color</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glClear</span><span class=\"token punctuation\">(</span>GLES20<span class=\"token punctuation\">.</span>GL_COLOR_BUFFER_BIT<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onSurfaceChanged</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">GL10</span> unused<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> width<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> height<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glViewport</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Cần vẽ gì trong khung View, shape như thế nào? Khai báo trong class <strong>Renderer</strong></p>\n<p><code class=\"language-text\">onSurfaceCreated</code> chạy lúc render lần đầu, dùng để khai báo các giá trị màu, độ sâu,… clear lại màn hình cho lần vẽ tiếp theo, ở đây ta khai báo màu đen (rgba = 0,0,0,0) là màu background để clear màn hình mỗi lần vẽ</p>\n<p><code class=\"language-text\">onDrawFrame</code> sẽ chạy lúc OpenGL vẽ (sau <code class=\"language-text\">onSurfaceCreated</code>), ta muốn vẽ gì sẽ làm trong này. Chạy <code class=\"language-text\">glClear</code> để clear màn hình và tô màu có giá trị khai báo trên <code class=\"language-text\">RendereronSurfaceCreated</code> (màu đen)</p>\n<p><code class=\"language-text\">onSurfaceChanged</code> sẽ chạy khi màn hình thay đổi (điện thoại để ngang dọc, wake from sleep), <code class=\"language-text\">glViewport(0, 0, width, height)</code> sẽ set nguyên màn hình là view của OpenGl, từ tọa độ (0,0) và độ dài là width, height</p>\n<ul>\n<li>Thêm View vào Activity</li>\n</ul>\n<p>View là một khung, Activity là cả màn hình, file <strong>MainActivity.java</strong> là file chứa class của màn hình chính của <strong>app</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MainActivity</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">AppCompatActivity</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">GLSurfaceView</span> gLView<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Bundle</span> savedInstanceState<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">onCreate</span><span class=\"token punctuation\">(</span>savedInstanceState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// Create a GLSurfaceView instance and set it</span>\n        <span class=\"token comment\">// as the ContentView for this Activity.</span>\n        gLView <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OpenGLView</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">setContentView</span><span class=\"token punctuation\">(</span>gLView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">onCreate</code> chạy khi mới vào <strong>app</strong>, ta tạo một <strong>OpenGLView</strong> và set nguyên màn hình có content là <strong>OpenGLView</strong> bằng <code class=\"language-text\">setContentView</code></p>\n<p>Tới đây chạy lại app, nếu không lỗi màn hình đen thui là OK do chưa vẽ gì :v</p>\n<ul>\n<li>Một số thắc mắc</li>\n</ul>\n<p><code class=\"language-text\">extends</code> là tạo một class con kế thừa từ một class </p>\n<p><code class=\"language-text\">implements</code> là định nghĩa hàm, biến của một class</p>\n<p>Lúc thì xài <code class=\"language-text\">GL10</code>, lúc <code class=\"language-text\">GLES20</code>? Vì version mới sẽ dựa vào những syntax cũ để những codebase khi upgrade lên sẽ không bị lỗi nên nó giữ <code class=\"language-text\">GL10</code> như là <strong>core</strong> syntax, code trong bài là OpenGL2.0, <a href=\"https://stackoverflow.com/questions/17543364/what-are-the-differences-between-opengl-es-2-0-and-opengl-es-3-0\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">2.0 vs 3.0</a></p>\n<h3 id=\"vẽ-tam-giác-\" style=\"position:relative;\"><a href=\"#v%E1%BA%BD-tam-gi%C3%A1c-\" aria-label=\"vẽ tam giác  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vẽ tam giác &#x3C;|</h3>\n<p>Trước khi code thì nhớ 2 điều </p>\n<blockquote>\n<p>Vertex Shader: Position and Custom data.</p>\n<p>Fragment Shader: RGB color.</p>\n</blockquote>\n<ul>\n<li>Định nghĩa shape của tam giác</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Triangle</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">FloatBuffer</span> vertexBuffer<span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// number of coordinates per vertex in this array</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> COORDS_PER_VERTEX <span class=\"token operator\">=</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">static</span> <span class=\"token keyword\">float</span> triangleCoords<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>   <span class=\"token comment\">// in counterclockwise order:</span>\n             <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span>  <span class=\"token number\">0.622008459f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// top</span>\n            <span class=\"token operator\">-</span><span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">0.311004243f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// bottom left</span>\n             <span class=\"token number\">0.5f</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">0.311004243f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.0f</span>  <span class=\"token comment\">// bottom right</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Set color with red, green, blue and alpha (opacity) values</span>\n    <span class=\"token keyword\">float</span> color<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0.63671875f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.76953125f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.22265625f</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1.0f</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Triangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// initialize vertex byte buffer for shape coordinates</span>\n        <span class=\"token class-name\">ByteBuffer</span> bb <span class=\"token operator\">=</span> <span class=\"token class-name\">ByteBuffer</span><span class=\"token punctuation\">.</span><span class=\"token function\">allocateDirect</span><span class=\"token punctuation\">(</span>\n                <span class=\"token comment\">// (number of coordinate values * 4 bytes per float)</span>\n                triangleCoords<span class=\"token punctuation\">.</span>length <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// use the device hardware's native byte order</span>\n        bb<span class=\"token punctuation\">.</span><span class=\"token function\">order</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ByteOrder</span><span class=\"token punctuation\">.</span><span class=\"token function\">nativeOrder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// create a floating point buffer from the ByteBuffer</span>\n        vertexBuffer <span class=\"token operator\">=</span> bb<span class=\"token punctuation\">.</span><span class=\"token function\">asFloatBuffer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// add the coordinates to the FloatBuffer</span>\n        vertexBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">put</span><span class=\"token punctuation\">(</span>triangleCoords<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// set the buffer to read the first coordinate</span>\n        vertexBuffer<span class=\"token punctuation\">.</span><span class=\"token function\">position</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Định nghĩa tọa độ (vertex) đưa vào ByteBuffer, biến <code class=\"language-text\">color</code> để cho hàm vẽ, một tọa độ là <strong>x, y, z</strong>, y = <code class=\"language-text\">0.5f</code> nghĩa là nửa trên màn hình (f = frame)</p>\n<ul>\n<li>Draw tam giác</li>\n</ul>\n<p>Đầu tiên ta cần định nghĩa:</p>\n<blockquote>\n<p>Vertex Shader - OpenGL ES graphics code for rendering the vertices of a shape. (tọa độ)</p>\n<p>Fragment Shader - OpenGL ES code for rendering the face of a shape with colors or textures. (màu)</p>\n<p>Program - An OpenGL ES object that contains the shaders you want to use for drawing one or more shapes.</p>\n</blockquote>\n<p>Những <strong>Shaders</strong> này chứa code <strong>OpenGL Shading Language (GLSL)</strong>, ta phải compiled những đoạn GLSL này và gắn nó vào <strong>Program</strong></p>\n<p><em>Khai báo vertex và fragment GLSL trong class Triangle</em></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Triangle</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> vertexShaderCode <span class=\"token operator\">=</span>\n        <span class=\"token string\">\"attribute vec4 vPosition;\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"void main() {\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"  gl_Position = vPosition;\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"}\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> fragmentShaderCode <span class=\"token operator\">=</span>\n        <span class=\"token string\">\"precision mediump float;\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"uniform vec4 vColor;\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"void main() {\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"  gl_FragColor = vColor;\"</span> <span class=\"token operator\">+</span>\n        <span class=\"token string\">\"}\"</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>Tạo hàm compile GLSL trong class Renderer</em></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">int</span> <span class=\"token function\">loadShader</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> type<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> shaderCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token comment\">// create a vertex shader type (GLES20.GL_VERTEX_SHADER)</span>\n    <span class=\"token comment\">// or a fragment shader type (GLES20.GL_FRAGMENT_SHADER)</span>\n    <span class=\"token keyword\">int</span> shader <span class=\"token operator\">=</span> GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glCreateShader</span><span class=\"token punctuation\">(</span>type<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// add the source code to the shader and compile it</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glShaderSource</span><span class=\"token punctuation\">(</span>shader<span class=\"token punctuation\">,</span> shaderCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glCompileShader</span><span class=\"token punctuation\">(</span>shader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> shader<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><em>Tạo OpenGL ES Program để vẽ và gắn compiled vertex và fragment GLSL vào program (trong constructor của class Triangle)</em></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Triangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> mProgram<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">Triangle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n        <span class=\"token keyword\">int</span> vertexShader <span class=\"token operator\">=</span> <span class=\"token class-name\">MyGLRenderer</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadShader</span><span class=\"token punctuation\">(</span>GLES20<span class=\"token punctuation\">.</span>GL_VERTEX_SHADER<span class=\"token punctuation\">,</span>\n                                        vertexShaderCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">int</span> fragmentShader <span class=\"token operator\">=</span> <span class=\"token class-name\">MyGLRenderer</span><span class=\"token punctuation\">.</span><span class=\"token function\">loadShader</span><span class=\"token punctuation\">(</span>GLES20<span class=\"token punctuation\">.</span>GL_FRAGMENT_SHADER<span class=\"token punctuation\">,</span>\n                                        fragmentShaderCode<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// create empty OpenGL ES Program</span>\n        mProgram <span class=\"token operator\">=</span> GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glCreateProgram</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// add the vertex shader to program</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glAttachShader</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">,</span> vertexShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// add the fragment shader to program</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glAttachShader</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">,</span> fragmentShader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// creates OpenGL ES program executables</span>\n        GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glLinkProgram</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Sau đó tạo hàm <code class=\"language-text\">draw()</code>, cơ bản hàm này ta:</p>\n<p>Lấy <code class=\"language-text\">handle to vertex</code> và <code class=\"language-text\">handle to fragment</code> -> <em>enable</em> <code class=\"language-text\">handle to vertext</code>  -> add data vào các <code class=\"language-text\">handle</code> (data tọa độ: <code class=\"language-text\">vertexBuffer</code> cho <code class=\"language-text\">handle to vertext</code>, data màu: <code class=\"language-text\">color</code> cho <code class=\"language-text\">handle to fragment</code>) ->  vẽ ->  <em>disable</em> <code class=\"language-text\">handle to vertext</code></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> positionHandle<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">int</span> colorHandle<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> vertexCount <span class=\"token operator\">=</span> triangleCoords<span class=\"token punctuation\">.</span>length <span class=\"token operator\">/</span> COORDS_PER_VERTEX<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> vertexStride <span class=\"token operator\">=</span> COORDS_PER_VERTEX <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 4 bytes per vertex</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Add program to OpenGL ES environment</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glUseProgram</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// get handle to vertex shader's vPosition member</span>\n    positionHandle <span class=\"token operator\">=</span> GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glGetAttribLocation</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">,</span> <span class=\"token string\">\"vPosition\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Enable a handle to the triangle vertices</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glEnableVertexAttribArray</span><span class=\"token punctuation\">(</span>positionHandle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Prepare the triangle coordinate data</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glVertexAttribPointer</span><span class=\"token punctuation\">(</span>positionHandle<span class=\"token punctuation\">,</span> COORDS_PER_VERTEX<span class=\"token punctuation\">,</span>\n                                 GLES20<span class=\"token punctuation\">.</span>GL_FLOAT<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n                                 vertexStride<span class=\"token punctuation\">,</span> vertexBuffer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// get handle to fragment shader's vColor member</span>\n    colorHandle <span class=\"token operator\">=</span> GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glGetUniformLocation</span><span class=\"token punctuation\">(</span>mProgram<span class=\"token punctuation\">,</span> <span class=\"token string\">\"vColor\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Set color for drawing the triangle</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glUniform4fv</span><span class=\"token punctuation\">(</span>colorHandle<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> color<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Draw the triangle</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glDrawArrays</span><span class=\"token punctuation\">(</span>GLES20<span class=\"token punctuation\">.</span>GL_TRIANGLES<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> vertexCount<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// Disable vertex array</span>\n    GLES20<span class=\"token punctuation\">.</span><span class=\"token function\">glDisableVertexAttribArray</span><span class=\"token punctuation\">(</span>positionHandle<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"example-source-code\" style=\"position:relative;\"><a href=\"#example-source-code\" aria-label=\"example source code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><a href=\"https://github.com/mtosity/OpenGLESTry\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Example source code</a></h3>","fields":{"slug":"/posts/android-opengl-es-setup-va-vi-du","tagSlugs":["/tag/computer-graphics/","/tag/android/","/tag/java/","/tag/open-gl/","/tag/open-gl-es/"]},"frontmatter":{"date":"2020-10-21T03:35:26.887Z","description":"Setup OpenGL ES 3.0 cho Android và giải thích ví dụ vẽ tam giác trên google developer docs","tags":["Computer Graphics","Android","Java","OpenGL","OpenGL ES"],"title":"Setup Android OpenGL ES và giải thích ví dụ vẽ tam giác","socialImage":"/media/opengles-triangle.png"}}},"pageContext":{"slug":"/posts/android-opengl-es-setup-va-vi-du"}},"staticQueryHashes":["251939775","3942705351","401334301"]}